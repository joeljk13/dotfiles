#!/bin/sh

if [ -d "$HOME$1" ]; then
    vim_plugin_path="$1"
else
    echo "Error: invalid vim plugin path '$HOME$1'" >&2
    exit 1
fi

cd "$HOME$1"

cp vim-pathogen/autoload/pathogen.vim "$HOME/.vim/autoload/"

for plugin in *; do
    cd "$HOME$1$plugin"

    git upa >/dev/null 2>&1

    if [ -z "$(find "$HOME/.vim/bundle" -maxdepth 1 -type d -name \
        "$plugin")" ]; then

        mkdir -p "$HOME/.vim/bundle/$plugin"
    else
        if [ -z "$(find "$HOME/.vim/bundle/$plugin" -maxdepth 1 -type d -name \
            "plugin")" ]; then

            continue
        fi
    fi

    cp -r * "$HOME/.vim/bundle/$plugin"
done
